"use strict";var V=Object.create;var l=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var F=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),q=(t,r)=>{for(var a in r)l(t,a,{get:r[a],enumerable:!0})},I=(t,r,a,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of K(r))!T.call(t,d)&&d!==a&&l(t,d,{get:()=>r[d],enumerable:!(u=G(r,d))||u.enumerable});return t};var H=(t,r,a)=>(a=t!=null?V(P(t)):{},I(r||!t||!t.__esModule?l(a,"default",{value:t,enumerable:!0}):a,t)),J=t=>I(l({},"__esModule",{value:!0}),t);var D=F((h,M)=>{(function(t,r){typeof h=="object"&&typeof M<"u"?r(h):typeof define=="function"&&define.amd?define(["exports"],r):r(t.ULID={})})(h,function(t){"use strict";function r(e){var n=new Error(e);return n.source="ulid",n}var a="0123456789ABCDEFGHJKMNPQRSTVWXYZ",u=a.length,d=Math.pow(2,48)-1,s=10,v=16;function y(e,n,o){return n>e.length-1?e:e.substr(0,n)+o+e.substr(n+1)}function p(e){for(var n=void 0,o=e.length,c=void 0,i=void 0,f=u-1;!n&&o-->=0;){if(c=e[o],i=a.indexOf(c),i===-1)throw r("incorrectly encoded string");if(i===f){e=y(e,o,a[0]);continue}n=y(e,o,a[i+1])}if(typeof n=="string")return n;throw r("cannot increment this string")}function E(e){var n=Math.floor(e()*u);return n===u&&(n=u-1),a.charAt(n)}function m(e,n){if(isNaN(e))throw new Error(e+" must be a number");if(e>d)throw r("cannot encode time greater than "+d);if(e<0)throw r("time must be positive");if(Number.isInteger(e)===!1)throw r("time must be an integer");for(var o=void 0,c="";n>0;n--)o=e%u,c=a.charAt(o)+c,e=(e-o)/u;return c}function w(e,n){for(var o="";e>0;e--)o=E(n)+o;return o}function O(e){if(e.length!==s+v)throw r("malformed ulid");var n=e.substr(0,s).split("").reverse().reduce(function(o,c,i){var f=a.indexOf(c);if(f===-1)throw r("invalid character found: "+c);return o+=f*Math.pow(u,i)},0);if(n>d)throw r("malformed ulid, timestamp too large");return n}function g(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments[1];n||(n=typeof window<"u"?window:null);var o=n&&(n.crypto||n.msCrypto);if(o)return function(){var i=new Uint8Array(1);return o.getRandomValues(i),i[0]/255};try{var c=require("crypto");return function(){return c.randomBytes(1).readUInt8()/255}}catch{}if(e){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch{}return function(){return Math.random()}}throw r("secure crypto unusable, insecure Math.random not allowed")}function N(e){return e||(e=g()),function(o){return isNaN(o)&&(o=Date.now()),m(o,s)+w(v,e)}}function U(e){e||(e=g());var n=0,o=void 0;return function(i){if(isNaN(i)&&(i=Date.now()),i<=n){var f=o=p(o);return m(n,s)+f}n=i;var S=o=w(v,e);return m(i,s)+S}}var L=N();t.replaceCharAt=y,t.incrementBase32=p,t.randomChar=E,t.encodeTime=m,t.encodeRandom=w,t.decodeTime=O,t.detectPrng=g,t.factory=N,t.monotonicFactory=U,t.ulid=L,Object.defineProperty(t,"__esModule",{value:!0})})});var x={};q(x,{handler:()=>k});module.exports=J(x);var A=require("@aws-sdk/client-dynamodb"),b=require("@aws-sdk/lib-dynamodb"),j=new A.DynamoDBClient({...process.env.NODE_ENV==="dev"&&{region:"localhost",endpoint:"http://localhost:8000",credentials:{accessKeyId:"accessKeyId",secretAccessKey:"secretAccessKey"}}}),C=b.DynamoDBDocumentClient.from(j,{marshallOptions:{removeUndefinedValues:!0}});var _=H(D()),R=()=>(0,_.monotonicFactory)()();var B=require("@aws-sdk/lib-dynamodb"),k=async t=>{try{if(!process.env.USER_TABLE_NAME)throw new Error("USER_TABLE_NAME is not defined");let r=R(),{UnprocessedItems:a}=await C.send(new B.BatchWriteCommand({RequestItems:{[process.env.USER_TABLE_NAME]:[{PutRequest:{Item:{id:r,name:`${r}-name`,email:`${r}-email`}}}]}}));return{statusCode:200,body:JSON.stringify({message:"Bulk write went successfully"})}}catch(r){return{statusCode:500,body:JSON.stringify({message:r.message})}}};0&&(module.exports={handler});
